pipeline {
  agent any

  stages {
    stage('SonarQube analysis') {
      environment {
        scannerHome = tool '[sonar server name]'
      }
      steps {
        withSonarQubeEnv('[Sonar Environment name]') {
          sh "${scannerHome}/bin/sonar-scanner -Dsonar.language=python"
          sonar.python.version=3.8
        }
        waitForQualityGate abortPipeline: false, credentialsId: 'SonarQube'
      }
    }
  }
}
